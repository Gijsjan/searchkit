general:
  branches:
    ignore:
      - gh-pages

machine:
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"

  node:
    version: 6.9.1

dependencies:
  pre: 
    - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc
  override:
    - yarn
  cache_directories:
    - ~/.cache/yarn

deployment:
  npm:
    tag: /^v\d+\.\d+\.\d+\-\d+$/
      commands:
        - npm publish --tag beta
    # tag: /^v\d+\.\d+\.\d+\$/
    #   commands:
    #     - npm publish      

test:
  pre:
    - npm install -g karma-cli
